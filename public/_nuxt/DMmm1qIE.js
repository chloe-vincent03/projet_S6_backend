import{_ as H}from"./2d5tmkDm.js";import{g as L,r as g,A as j,l as S,c as d,o as c,a as e,J as T,y as w,t as C,D as Q,E as J,_ as E,F as R,s as P,b as D,w as Y,q as I,N as K,k as ee,j as te,z as U,v as B,B as le,O as se,n as oe,d as ne}from"./FsFn14e0.js";import{u as ae}from"./LQRTUvHo.js";import{u as G}from"./41ABSLID.js";import"./BJ2ClxiI.js";const ie={class:"relative w-full h-full"},re=["src"],ce={class:"absolute inset-0 z-20 flex flex-col items-center justify-end pb-20 pointer-events-none"},ue={class:"text-white font-serif text-5xl md:text-7xl font-bold text-shadow-lg tracking-wider"},de={class:"relative h-12 bg-black/30 backdrop-blur-md rounded-full border border-white/20 flex items-center px-2"},ve=["disabled"],he=L({__name:"MechanicFocus",props:{image:{},title:{},initialCompleted:{type:Boolean}},emits:["complete"],setup(p,{emit:y}){const $=p,M=y,t=g(0),s=g(!1),a=j(()=>Math.max(0,20-t.value/100*20)),i=j(()=>Math.max(0,100-t.value)),u=j(()=>80+t.value/100*20),x=j(()=>80+t.value/100*20),m=()=>{t.value>=98&&!s.value&&(t.value=100,s.value=!0,M("complete"))};return S(()=>{$.initialCompleted&&(t.value=100,s.value=!0,M("complete"))}),(b,l)=>(c(),d("div",ie,[e("img",{src:p.image,class:"absolute inset-0 w-full h-full object-cover transition-all duration-100 ease-out will-change-[filter]",style:T({filter:`blur(${a.value}px) grayscale(${i.value}%) contrast(${u.value}%) brightness(${x.value}%)`})},null,12,re),e("div",ce,[e("div",{class:w(["mb-8 text-center transition-opacity duration-500 px-6",{"opacity-0":s.value}])},[...l[1]||(l[1]=[e("h2",{class:"text-white font-serif text-2xl md:text-3xl mb-2 text-shadow-lg drop-shadow-md"}," Ajustez la netteté... ",-1),e("p",{class:"text-white/80 text-sm max-w-md mx-auto drop-shadow"}," Glissez pour faire la mise au point sur ce lieu. ",-1)])],2),e("div",{class:w(["mb-20 text-center transition-all duration-1000 transform px-6 absolute top-1/2 -translate-y-1/2",s.value?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-10"])},[e("h1",ue,C(p.title),1)],2),e("div",{class:w(["w-full max-w-md px-8 pointer-events-auto transition-all duration-700 transform",{"translate-y-32 opacity-0":s.value}])},[e("div",de,[l[3]||(l[3]=e("div",{class:"absolute left-4 text-white/50 text-xs"},"Flou",-1)),l[4]||(l[4]=e("div",{class:"absolute right-4 text-white/50 text-xs"},"Net",-1)),Q(e("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":l[0]||(l[0]=h=>t.value=h),onInput:m,disabled:s.value,class:"w-full h-full opacity-0 absolute inset-0 z-20 cursor-pointer"},null,40,ve),[[J,t.value,void 0,{number:!0}]]),e("div",{class:"absolute top-1 bottom-1 w-10 bg-white rounded-full shadow-lg transition-all duration-75 ease-out flex items-center justify-center",style:T({left:`calc(${t.value}% - 20px + ${(50-t.value)*.4}px)`})},[...l[2]||(l[2]=[e("div",{class:"w-1.5 h-4 border-l border-r border-stone-300"},null,-1)])],4),l[5]||(l[5]=e("div",{class:"absolute top-1/2 left-2 right-2 h-0.5 bg-white/20 -z-10"},null,-1))])],2)])]))}}),W=Object.assign(E(he,[["__scopeId","data-v-9f828ea7"]]),{__name:"MechanicsMechanicFocus"}),me=["src"],pe={class:"absolute inset-0 z-20 flex flex-col items-center justify-end pb-20 pointer-events-none"},fe={class:"text-white/50 text-xs mt-2"},xe={class:"text-white font-serif text-5xl md:text-7xl font-bold text-shadow-lg tracking-wider"},O=10,X=10,ge=.6,be=L({__name:"MechanicFlashlight",props:{image:{},title:{},initialCompleted:{type:Boolean}},emits:["complete"],setup(p,{emit:y}){const $=p,M=y,t=g(null),s=g(-500),a=g(-500),i=g(!1),u=new Set,x=g(0),m=j(()=>Math.min(100,x.value/(O*X*ge)*100)),b=o=>{i.value||h(o.clientX,o.clientY)},l=o=>{if(i.value)return;const n=o.touches[0];n&&h(n.clientX,n.clientY)},h=(o,n)=>{if(!t.value)return;const r=t.value.getBoundingClientRect();s.value=o-r.left,a.value=n-r.top;const f=Math.max(0,Math.min(1,s.value/r.width)),_=Math.max(0,Math.min(1,a.value/r.height)),k=Math.floor(f*O),z=Math.floor(_*X),A=`${k}-${z}`;u.has(A)||(u.add(A),x.value=u.size,v())},v=()=>{m.value>=100&&!i.value&&(i.value=!0,M("complete"))};return S(()=>{$.initialCompleted&&(x.value=O*X,i.value=!0,M("complete"))}),(o,n)=>(c(),d("div",{class:"relative w-full h-full cursor-none overflow-hidden touch-none",onMousemove:b,onTouchmove:l,ref_key:"container",ref:t},[e("img",{src:p.image,class:w(["absolute inset-0 w-full h-full object-cover pointer-events-none transition-all duration-1000",{"brightness-100":i.value,"brightness-50":!i.value}])},null,10,me),e("div",{class:w(["absolute inset-0 bg-black z-10 transition-opacity duration-1000 pointer-events-none",{"opacity-0":i.value,"opacity-100":!i.value}]),style:T({"mask-image":`radial-gradient(circle 200px at ${s.value}px ${a.value}px, transparent 10%, black 100%)`,"-webkit-mask-image":`radial-gradient(circle 200px at ${s.value}px ${a.value}px, transparent 10%, black 100%)`})},null,6),e("div",pe,[e("div",{class:w(["mb-8 text-center transition-opacity duration-500 px-6",{"opacity-0":i.value}])},[n[0]||(n[0]=e("h2",{class:"text-white font-serif text-2xl md:text-3xl mb-2 text-shadow-lg drop-shadow-md"}," Explorez l'obscurité... ",-1)),n[1]||(n[1]=e("p",{class:"text-white/80 text-sm max-w-md mx-auto drop-shadow"}," Utilisez votre lumière pour révéler les secrets de ce lieu. ",-1)),e("p",fe,C(Math.round(m.value))+"% exploré",1)],2),e("div",{class:w(["mb-20 text-center transition-all duration-1000 transform px-6 absolute top-1/2 -translate-y-1/2",i.value?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-10"])},[e("h1",xe,C(p.title),1)],2)])],544))}}),we=Object.assign(E(be,[["__scopeId","data-v-9b3324f3"]]),{__name:"MechanicsMechanicFlashlight"}),ye={class:"relative w-full h-full flex flex-col items-center justify-center bg-black/90 p-4"},_e=["onClick"],ke={class:"absolute inset-0 z-20 flex flex-col items-center justify-end pb-20 pointer-events-none"},$e={class:"text-white font-serif text-5xl md:text-7xl font-bold text-shadow-lg tracking-wider"},Me=L({__name:"MechanicPuzzle",props:{image:{},title:{},initialCompleted:{type:Boolean}},emits:["complete"],setup(p,{emit:y}){const $=p,M=y,t=g([]),s=g(null),a=g(!1),i=()=>{const l=Array.from({length:9},(h,v)=>({id:v,correctPos:v}));do for(let h=l.length-1;h>0;h--){const v=Math.floor(Math.random()*(h+1)),o=l[h],n=l[v];o&&n&&(l[h]=n,l[v]=o)}while(m(l));t.value=l},u=l=>{a.value||(s.value===null?s.value=l:s.value===l?s.value=null:(x(s.value,l),s.value=null,m(t.value)&&b()))},x=(l,h)=>{const v=t.value[l],o=t.value[h];v&&o&&(t.value[l]=o,t.value[h]=v)},m=l=>l.every((h,v)=>h.correctPos===v),b=()=>{a.value=!0,setTimeout(()=>{M("complete")},1e3)};return S(()=>{$.initialCompleted?(a.value=!0,t.value=Array.from({length:9},(l,h)=>({id:h,correctPos:h})),M("complete")):i()}),(l,h)=>(c(),d("div",ye,[e("div",{class:w(["relative aspect-square w-full max-w-md grid grid-cols-3 gap-1 bg-stone-800 p-1 shadow-2xl rounded-lg overflow-hidden transition-all duration-1000",{"gap-0 p-0 scale-105 shadow-inner":a.value}])},[(c(!0),d(R,null,P(t.value,(v,o)=>(c(),d("div",{key:v.id,class:w(["relative w-full h-full cursor-pointer transition-all duration-300 ease-in-out border-2",[s.value===o?"border-yellow-400 z-10 scale-95 brightness-110":"border-transparent",a.value?"border-none":"hover:brightness-110"]]),style:T({backgroundImage:`url(${p.image})`,backgroundSize:"300% 300%",backgroundPosition:`${v.correctPos%3*50}% ${Math.floor(v.correctPos/3)*50}%`}),onClick:n=>u(o)},null,14,_e))),128))],2),e("div",ke,[e("div",{class:w(["mb-8 text-center transition-opacity duration-500 px-6",{"opacity-0":a.value}])},[...h[0]||(h[0]=[e("h2",{class:"text-white font-serif text-2xl md:text-3xl mb-2 text-shadow-lg drop-shadow-md"}," Recomposez le souvenir... ",-1),e("p",{class:"text-white/80 text-sm max-w-md mx-auto drop-shadow font-medium"}," Touchez deux cases pour les échanger. ",-1)])],2),e("div",{class:w(["mb-20 text-center transition-all duration-1000 transform px-6 absolute top-1/2 -translate-y-1/2",a.value?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-10"])},[e("h1",$e,C(p.title),1)],2)])]))}}),Ce=Object.assign(E(Me,[["__scopeId","data-v-f9410926"]]),{__name:"MechanicsMechanicPuzzle"}),ze={class:"relative w-full h-full flex flex-col items-center justify-center bg-black/90 p-4 overflow-hidden"},Ie=["src"],je=["src"],Ae={class:"absolute inset-0 z-20 flex flex-col items-center justify-end pb-20 pointer-events-none"},Te={class:"text-white font-serif text-5xl md:text-7xl font-bold text-shadow-lg tracking-wider"},Be=L({__name:"MechanicRotate",props:{image:{},title:{},initialCompleted:{type:Boolean}},emits:["complete"],setup(p,{emit:y}){const $=p,M=y,t=g([{id:0,currentAngle:Math.floor(Math.random()*360),targetAngle:0,mask:"radial-gradient(circle closest-side, black 35%, transparent 35.5%)"},{id:1,currentAngle:Math.floor(Math.random()*360),targetAngle:0,mask:"radial-gradient(circle closest-side, transparent 35%, black 35.5%, black 65%, transparent 65.5%)"},{id:2,currentAngle:Math.floor(Math.random()*360),targetAngle:0,mask:"radial-gradient(circle closest-side, transparent 65%, black 65.5%)"}]),s=g(!1);let a=null,i=0,u=0,x=0,m=0;const b=(r,f)=>Math.atan2(f-m,r-x)*(180/Math.PI),l=(r,f)=>Math.sqrt(Math.pow(r-x,2)+Math.pow(f-m,2)),h=r=>{if(s.value)return;r.preventDefault();const _=r.currentTarget.getBoundingClientRect();x=_.left+_.width/2,m=_.top+_.height/2;const k=_.width/2;let z=0,A=0;"touches"in r&&r.touches.length>0?(z=r.touches[0].clientX,A=r.touches[0].clientY):"clientX"in r&&(z=r.clientX,A=r.clientY);const F=l(z,A)/k;if(F<=.35)a=0;else if(F<=.65)a=1;else if(F<=1)a=2;else return;if(u=b(z,A),a!==null){const V=t.value[a];V&&(i=V.currentAngle)}window.addEventListener("mousemove",v),window.addEventListener("mouseup",o),window.addEventListener("touchmove",v),window.addEventListener("touchend",o)},v=r=>{if(a===null)return;let f=0,_=0;"touches"in r&&r.touches.length>0?(f=r.touches[0].clientX,_=r.touches[0].clientY):"clientX"in r&&(f=r.clientX,_=r.clientY);const z=b(f,_)-u,A=t.value[a];A&&(A.currentAngle=i+z)},o=()=>{if(a===null)return;const r=t.value[a];if(r){let f=r.currentAngle%360;f<0&&(f+=360),(f<10||f>350)&&(r.currentAngle=0)}n(),a=null,window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",o),window.removeEventListener("touchmove",v),window.removeEventListener("touchend",o)},n=()=>{t.value.every(f=>f.currentAngle===0)&&(s.value=!0,M("complete"))};return S(()=>{$.initialCompleted&&(s.value=!0,t.value.forEach(r=>r.currentAngle=0),M("complete"))}),(r,f)=>(c(),d("div",ze,[e("div",{class:"relative w-[300px] h-[300px] md:w-[500px] md:h-[500px]",onMousedown:h,onTouchstart:h},[e("img",{src:p.image,class:"absolute inset-0 w-full h-full object-cover rounded-full opacity-20 pointer-events-none blur-sm"},null,8,Ie),(c(!0),d(R,null,P(t.value,(_,k)=>(c(),d("div",{key:k,class:w(["absolute inset-0 w-full h-full rounded-full cursor-grab active:cursor-grabbing transition-transform duration-300 ease-out will-change-transform shadow-2xl",{"duration-1000 ease-in-out":s.value}]),style:T({transform:`rotate(${_.currentAngle}deg)`,maskImage:_.mask,WebkitMaskImage:_.mask,zIndex:10+k})},[e("img",{src:p.image,class:"w-full h-full object-cover pointer-events-none select-none"},null,8,je)],6))),128))],32),e("div",Ae,[e("div",{class:w(["mb-8 text-center transition-opacity duration-500 px-6",{"opacity-0":s.value}])},[...f[0]||(f[0]=[e("h2",{class:"text-white font-serif text-2xl md:text-3xl mb-2 text-shadow-lg drop-shadow-md"}," Alignez le souvenir... ",-1),e("p",{class:"text-white/80 text-sm max-w-md mx-auto drop-shadow font-medium"}," Faites tourner les anneaux pour reconstruire l'image. ",-1)])],2),e("div",{class:w(["mb-20 text-center transition-all duration-1000 transform px-6 absolute top-1/2 -translate-y-1/2",s.value?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-10"])},[e("h1",Te,C(p.title),1)],2)])]))}}),Le=Object.assign(E(Be,[["__scopeId","data-v-b4c52a95"]]),{__name:"MechanicsMechanicRotate"}),Ee={class:"relative w-full h-full flex flex-col items-center justify-center bg-black overflow-hidden select-none"},Se={class:"absolute inset-0 z-0"},Re=["src"],Pe={class:"absolute inset-0 z-10 overflow-hidden pointer-events-none"},Ne=["onClick"],Fe={xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"white",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"drop-shadow-lg text-white"},Oe={key:0,d:"M9 18V5l12-2v13"},Xe={key:1,d:"M6 15h3a3 3 0 1 1-3 3v-3Z"},De={key:2,cx:"18",cy:"16",r:"3"},Ye={key:3,d:"M9 18V5l12-2v13"},qe={key:4,d:"M6 15h3a3 3 0 1 1-3 3v-3Z"},Ve={key:5,d:"M11 5L6 9H2v6h4l5 4V5z"},Ue={class:"absolute inset-0 z-20 flex flex-col items-center justify-end pb-20 pointer-events-none"},Ge={class:"text-white/80 text-sm max-w-md mx-auto drop-shadow font-medium"},We={class:"text-white font-serif text-5xl md:text-7xl font-bold text-shadow-lg tracking-wider"},N=7,Ze=L({__name:"MechanicMelody",props:{image:{},title:{},initialCompleted:{type:Boolean}},emits:["complete"],setup(p,{emit:y}){const $=p,M=y,t=g([]),s=g(0),a=g(!1);S(()=>{if($.initialCompleted){a.value=!0,s.value=N;return}for(let m=0;m<N;m++)t.value.push({id:m,x:10+Math.random()*80,y:20+Math.random()*60,type:Math.floor(Math.random()*3),duration:3+Math.random()*3,delay:Math.random()*2})});const i=j(()=>{if(a.value)return{filter:"blur(0px) grayscale(0%) brightness(100%)",opacity:1};const m=s.value/N,b=20*(1-m),l=100*(1-m),h=30+70*m;return{filter:`blur(${b}px) grayscale(${l}%) brightness(${h}%)`,opacity:.3+.7*m}}),u=m=>{if(a.value)return;const b=t.value.findIndex(l=>l.id===m);b!==-1&&(t.value.splice(b,1),s.value++,s.value>=N&&x())},x=()=>{a.value=!0,M("complete")};return(m,b)=>(c(),d("div",Ee,[e("div",Se,[e("img",{src:p.image,class:"w-full h-full object-cover transition-all duration-700 ease-out",style:T(i.value),alt:"Souvenir à recomposer"},null,12,Re)]),e("div",Pe,[D(K,{name:"note-pop"},{default:Y(()=>[(c(!0),d(R,null,P(t.value,l=>(c(),d("div",{key:l.id,class:"absolute cursor-pointer pointer-events-auto hover:scale-110 active:scale-95 transition-transform duration-200 p-4",style:T({left:`${l.x}%`,top:`${l.y}%`,animation:`float ${l.duration}s ease-in-out infinite ${l.delay}s`}),onClick:h=>u(l.id)},[(c(),d("svg",Fe,[l.type===0?(c(),d("path",Oe)):I("",!0),l.type===0?(c(),d("path",Xe)):I("",!0),l.type===0?(c(),d("circle",De)):I("",!0),l.type===1?(c(),d("path",Ye)):I("",!0),l.type===1?(c(),d("path",qe)):I("",!0),l.type===2?(c(),d("path",Ve)):I("",!0)]))],12,Ne))),128))]),_:1})]),e("div",Ue,[e("div",{class:w(["mb-12 text-center transition-opacity duration-500 px-6",{"opacity-0":a.value}])},[b[0]||(b[0]=e("h2",{class:"text-white font-serif text-2xl md:text-3xl mb-2 text-shadow-lg drop-shadow-md"}," Attrapez la mélodie... ",-1)),e("p",Ge," Cliquez sur les notes pour éclaircir le souvenir ("+C(s.value)+"/"+C(N)+"). ",1)],2),e("div",{class:w(["mb-20 text-center transition-all duration-1000 transform px-6 absolute top-1/2 -translate-y-1/2",a.value?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-10"])},[e("h1",We,C(p.title),1)],2)])]))}}),Qe=Object.assign(E(Ze,[["__scopeId","data-v-9339f1ad"]]),{__name:"MechanicsMechanicMelody"}),Je={class:"relative w-full h-full bg-stone-900 overflow-hidden select-none"},He=["src"],Ke={key:0,class:"absolute bottom-0 w-full p-6 bg-gradient-to-t from-black/90 to-transparent flex flex-col items-center"},et={class:"flex gap-4 md:gap-8"},tt={key:0,class:"absolute inset-0 flex items-center justify-center bg-black/40"},lt={class:"text-white font-serif text-5xl md:text-7xl font-bold text-shadow-lg tracking-wider"},st=L({__name:"MechanicDifference",props:{image:{},title:{},initialCompleted:{type:Boolean}},emits:["complete"],setup(p,{emit:y}){const $=p,M=y,t=g(!1),s=g(null),a=g(null),i=[{id:1,x:20,y:30,size:10,found:!1},{id:2,x:80,y:30,size:12,found:!1},{id:3,x:50,y:50,size:8,found:!1},{id:4,x:30,y:70,size:11,found:!1},{id:5,x:70,y:70,size:10,found:!1}],u=g([]),x=j(()=>u.value.filter(v=>v.found)),m=()=>{$.initialCompleted||(u.value=[...i].sort(()=>.5-Math.random()).slice(0,3))},b=v=>{if(t.value||!s.value)return;const o=s.value.getBoundingClientRect(),n=v.clientX-o.left,r=v.clientY-o.top,f=n/o.width*100,_=r/o.height*100;a.value={x:v.clientX-o.left,y:v.clientY-o.top},setTimeout(()=>a.value=null,300);let k=!1;u.value.forEach(z=>{if(z.found)return;const A=Math.abs(z.x-f),q=Math.abs(z.y-_)*(o.height/o.width);Math.hypot(A,q)<8&&(z.found=!0,k=!0)}),k&&l()},l=()=>{u.value.every(v=>v.found)&&h()},h=()=>{t.value||(t.value=!0,M("complete"))};return S(()=>{$.initialCompleted?t.value=!0:s.value?.complete&&m()}),(v,o)=>(c(),d("div",Je,[e("div",{class:"relative w-full h-full cursor-crosshair",onClick:b},[e("img",{ref_key:"mainImage",ref:s,src:p.image,class:w(["w-full h-full object-cover opacity-60 transition-all duration-500",{"opacity-100":t.value}]),onLoad:m},null,42,He),(c(!0),d(R,null,P(x.value,(n,r)=>(c(),d("div",{key:r,class:"absolute border-2 border-white rounded-full shadow-[0_0_15px_rgba(255,255,255,0.8)] pointer-events-none transition-all duration-500",style:T({left:`${n.x}%`,top:`${n.y}%`,width:`${n.size}%`,paddingBottom:`${n.size}%`,transform:"translate(-50%, -50%) scale(1)"})},null,4))),128)),a.value?(c(),d("div",{key:0,class:"absolute rounded-full border border-white/50 animate-ping pointer-events-none",style:T({left:a.value.x+"px",top:a.value.y+"px",width:"40px",height:"40px",transform:"translate(-50%, -50%)"})},null,4)):I("",!0)]),t.value?I("",!0):(c(),d("div",Ke,[o[1]||(o[1]=e("h2",{class:"text-white font-serif text-xl mb-4 text-shadow"},"Retrouvez ces détails...",-1)),e("div",et,[(c(!0),d(R,null,P(u.value,(n,r)=>(c(),d("div",{key:r,class:w(["relative w-24 h-24 rounded-full border-4 overflow-hidden bg-black transition-all duration-300 bg-no-repeat",n.found?"border-green-500 opacity-50 scale-90 grayscale":"border-white hover:scale-110 shadow-lg"]),style:T({backgroundImage:`url(${p.image})`,backgroundSize:"500%",backgroundPosition:`${n.x}% ${n.y}%`})},[n.found?(c(),d("div",tt,[...o[0]||(o[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#22c55e","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"20 6 9 17 4 12"})],-1)])])):I("",!0)],6))),128))])])),e("div",{class:w(["absolute inset-0 pointer-events-none flex flex-col items-center justify-center transition-all duration-1000 transform px-6",t.value?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-10"])},[e("h1",lt,C(p.title),1)],2)]))}}),ot=Object.assign(E(st,[["__scopeId","data-v-ea94c172"]]),{__name:"MechanicsMechanicDifference"}),nt={class:"relative w-full h-full bg-black overflow-hidden select-none"},at=["src"],it={key:0,class:"absolute inset-0 z-10 flex items-center justify-center"},rt={class:"relative w-full max-w-lg aspect-square"},ct=["onClick"],ut={key:0,class:"w-full h-full bg-white/20 rounded-full blur-md"},dt={class:"absolute inset-0 z-20 flex flex-col items-center justify-end pb-20 pointer-events-none"},vt={key:0,class:"mb-12 text-center transition-opacity duration-300 pointer-events-auto"},ht={class:"text-white font-serif text-2xl mb-2 text-shadow-lg"},mt={class:"flex gap-2 justify-center mt-4"},pt={class:"text-white font-serif text-5xl md:text-7xl font-bold text-shadow-lg tracking-wider"},Z=3,ft=L({__name:"MechanicSequence",props:{image:{},title:{},initialCompleted:{type:Boolean}},emits:["complete"],setup(p,{emit:y}){const $=p,M=y,t=g(!1),s=g(null),a=[{positionClass:"top-10 left-1/2 -translate-x-1/2"},{positionClass:"bottom-10 left-1/2 -translate-x-1/2"},{positionClass:"left-10 top-1/2 -translate-y-1/2"},{positionClass:"right-10 top-1/2 -translate-y-1/2"}],i=g("IDLE"),u=g("Mémorisez la séquence..."),x=g([]),m=g([]),b=g(0),l=()=>{b.value=0,h()},h=async()=>{i.value="PLAYING_SEQUENCE",u.value="Observez...",m.value=[];const f=3+b.value;x.value=Array.from({length:f},()=>Math.floor(Math.random()*4)),await v(),i.value="WAITING_INPUT",u.value="À vous !"},v=async()=>{for(let f=0;f<x.value.length;f++){await new Promise(k=>setTimeout(k,500));const _=x.value[f];_!==void 0&&o(_),await new Promise(k=>setTimeout(k,600))}},o=f=>{s.value=f,setTimeout(()=>{s.value=null},400)},n=f=>{if(i.value!=="WAITING_INPUT")return;o(f),m.value.push(f);const _=m.value.length-1,k=x.value[_];if(k===void 0||m.value[_]!==k){i.value="FAIL",u.value="Oups ! Séquence incorrecte.";return}m.value.length===x.value.length&&(b.value++,b.value>=Z?r():(u.value="Bien joué ! Niveau suivant...",setTimeout(h,1e3)))},r=()=>{t.value||(i.value="SUCCESS",t.value=!0,M("complete"))};return S(()=>{$.initialCompleted?t.value=!0:u.value="Prêt à commencer ?"}),(f,_)=>(c(),d("div",nt,[e("img",{src:p.image,class:w(["absolute inset-0 w-full h-full object-cover opacity-40",{"opacity-100 transition-opacity duration-1000":t.value}])},null,10,at),t.value?I("",!0):(c(),d("div",it,[e("div",rt,[(c(),d(R,null,P(a,(k,z)=>e("div",{key:z,class:w(["absolute w-24 h-24 rounded-full border-4 border-white/50 cursor-pointer transition-all duration-200 flex items-center justify-center",[k.positionClass,s.value===z?"bg-yellow-100 shadow-[0_0_50px_20px_rgba(255,255,200,0.8)] scale-110 border-white":"bg-black/50 hover:bg-white/10"]]),onClick:A=>n(z)},[s.value===z?(c(),d("div",ut)):I("",!0)],10,ct)),64))])])),e("div",dt,[t.value?I("",!0):(c(),d("div",vt,[e("h2",ht,C(u.value),1),e("div",mt,[(c(),d(R,null,P(Z,k=>e("div",{key:k,class:w(["w-3 h-3 rounded-full transition-colors",b.value>=k?"bg-yellow-400 shadow-glow":"bg-stone-600"])},null,2)),64))]),i.value==="FAIL"||i.value==="IDLE"?(c(),d("button",{key:0,onClick:l,class:"mt-6 px-6 py-2 bg-white text-black font-bold rounded-full hover:bg-yellow-400 transition-colors pointer-events-auto"},C(i.value==="FAIL"?"Réessayer":"Commencer"),1)):I("",!0)])),e("div",{class:w(["mb-20 text-center transition-all duration-1000 transform px-6 absolute top-1/2 -translate-y-1/2 w-full",t.value?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-10"])},[e("h1",pt,C(p.title),1)],2)])]))}}),xt=Object.assign(E(ft,[["__scopeId","data-v-0389c8e2"]]),{__name:"MechanicsMechanicSequence"}),gt={class:"relative w-full h-full bg-[#1a1a1a] overflow-hidden select-none flex flex-col items-center justify-center"},bt={class:"absolute inset-0 z-0"},wt=["src"],yt={class:"relative w-full h-32 bg-black/80 rounded-lg mb-8 overflow-hidden border border-green-500/30 shadow-[inset_0_0_20px_rgba(0,0,0,1)]"},_t={class:"absolute inset-0 w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none"},kt=["d","stroke"],$t={class:"flex flex-col gap-6"},Mt=["disabled"],Ct={class:"text-white font-serif text-5xl md:text-7xl font-bold text-shadow-lg tracking-wider"},zt=L({__name:"MechanicTuning",props:{image:{},title:{},initialCompleted:{type:Boolean}},emits:["complete"],setup(p,{emit:y}){const $=p,M=y,t=g(!1),s=g(50),a=g(0);S(()=>{$.initialCompleted?(t.value=!0,s.value=a.value):a.value=10+Math.random()*80});const i=j(()=>Math.abs(s.value-a.value)),u=j(()=>i.value>20?0:i.value<.5?100:Math.round((1-i.value/20)*100)),x=j(()=>u.value>90),m=j(()=>t.value?0:Math.min(.8,i.value/30)),b=j(()=>{if(t.value)return{filter:"none",opacity:1};const v=Math.min(20,i.value/2),o=Math.min(100,i.value*2);return{filter:`blur(${v}px) grayscale(${o}%)`,opacity:.3+.7*(u.value/100)}}),l=j(()=>`M0 50 Q ${25+(s.value-a.value)*2} 10, 50 50 T 100 50`),h=()=>{x.value&&(s.value=a.value,t.value=!0,M("complete"))};return(v,o)=>(c(),d("div",gt,[e("div",bt,[e("img",{src:p.image,class:"w-full h-full object-cover transition-all duration-300",style:T(b.value)},null,12,wt),e("div",{class:"absolute inset-0 opacity-50 pointer-events-none mix-blend-overlay",style:T({opacity:m.value,backgroundImage:"url(https://grainy-gradients.vercel.app/noise.svg)"})},null,4)]),e("div",{class:w(["relative z-20 w-full max-w-md p-8 bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 shadow-2xl transition-all duration-500",{"opacity-0 pointer-events-none":t.value}])},[o[3]||(o[3]=e("h2",{class:"text-white font-serif text-2xl mb-6 text-center text-shadow"},"Réglage de la fréquence...",-1)),e("div",yt,[o[1]||(o[1]=e("svg",{class:"absolute inset-0 w-full h-full opacity-30",viewBox:"0 0 100 100",preserveAspectRatio:"none"},[e("path",{d:"M0 50 Q 25 10, 50 50 T 100 50",fill:"none",stroke:"#22c55e","stroke-width":"2","vector-effect":"non-scaling-stroke"})],-1)),(c(),d("svg",_t,[e("path",{d:l.value,fill:"none",stroke:x.value?"#22c55e":"#ef4444","stroke-width":"3","vector-effect":"non-scaling-stroke",class:"transition-all duration-100"},null,8,kt)])),e("div",{class:w(["absolute top-2 right-2 text-xs font-mono",x.value?"text-green-400":"text-red-500"])}," SIGNAL: "+C(u.value)+"% ",3)]),e("div",$t,[e("div",null,[o[2]||(o[2]=e("label",{class:"block text-white/50 text-xs uppercase tracking-widest mb-2"},"Fréquence (MHz)",-1)),Q(e("input",{type:"range",min:"0",max:"100",step:"0.1","onUpdate:modelValue":o[0]||(o[0]=n=>s.value=n),class:"w-full h-2 bg-stone-700 rounded-lg appearance-none cursor-pointer accent-green-500"},null,512),[[J,s.value,void 0,{number:!0}]])]),e("button",{onClick:h,class:w(["w-full py-4 rounded-xl font-bold uppercase tracking-widest transition-all shadow-lg",x.value?"bg-green-500 text-white hover:bg-green-400 hover:scale-[1.02] cursor-pointer":"bg-stone-800 text-white/20 cursor-not-allowed"]),disabled:!x.value},C(x.value?"Capter le signal":"Recherche..."),11,Mt)])],2),e("div",{class:w(["absolute bottom-20 z-20 text-center transition-all duration-1000 transform px-6 w-full",t.value?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-10"])},[e("h1",Ct,C(p.title),1)],2)]))}}),It=Object.assign(E(zt,[["__scopeId","data-v-6af7bb78"]]),{__name:"MechanicsMechanicTuning"}),jt={key:0,class:"absolute inset-0 flex items-center justify-center text-white/50 z-50 bg-black"},At={key:1,class:"absolute inset-0 flex items-center justify-center text-red-500 z-50 bg-black"},Tt={key:2,class:"relative w-full h-screen sticky top-0 z-0 bg-black"},Bt={key:1,class:"relative w-full h-full"},Lt=["src"],Et={class:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center"},St={class:"text-white font-serif text-5xl md:text-7xl font-bold text-shadow-lg tracking-wider animate-fade-in-up"},Rt={key:2,class:"absolute bottom-8 left-0 right-0 z-30 flex justify-center animate-bounce"},Pt={key:3,id:"details",class:"relative z-30 bg-white min-h-[50vh]"},Nt={class:"container mx-auto px-6 py-24 max-w-4xl text-center"},Ft={class:"text-sm font-bold uppercase tracking-widest text-stone-500 block mb-4"},Ot={class:"text-4xl md:text-5xl font-serif text-[#2C3E50] leading-tight mb-8"},Xt={class:"text-xl text-stone-600 leading-loose font-light mb-16"},Dt=L({__name:"[id]",async setup(p){let y,$;const M=ee(),t=oe(),s=ae("auth_token");te();const a=M.params.id,i=g(!1),{data:u,pending:x,error:m}=([y,$]=U(()=>G(`${t.public.apiBase}/places/${a}`,"$KBjPut1aMZ")),y=await y,$(),y),{data:b}=([y,$]=U(()=>G(`${t.public.apiBase}/user/profile`,{headers:{Authorization:`Bearer ${s.value}`}},"$lglqkNus7h")),y=await y,$(),y);b.value&&b.value.progress&&u.value&&b.value.progress.some(n=>n.placeId===a&&n.isCompleted)&&(i.value=!0);const l=j(()=>{if(!u.value)return W;switch(u.value.order){case 3:return we;case 4:return Qe;case 5:return Ce;case 6:return Le;case 7:return ot;case 8:return xt;case 9:return It;default:return W}}),h=async()=>{if(!i.value&&(i.value=!0,s.value))try{await fetch(`${t.public.apiBase}/user/progress`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value}`},body:JSON.stringify({placeId:a})})}catch(o){console.error("Failed to save progress",o)}},v=()=>{document.getElementById("details")?.scrollIntoView({behavior:"smooth"})};return(o,n)=>{const r=H;return c(),d("div",{class:w(["relative w-full transition-all duration-1000",{"h-screen overflow-hidden":!i.value,"min-h-screen bg-stone-50":i.value}])},[B(x)?(c(),d("div",jt,[...n[0]||(n[0]=[e("p",{class:"animate-pulse"},"Initialisation de la mémoire...",-1)])])):B(m)||!B(u)?(c(),d("div",At,[n[2]||(n[2]=e("p",null,"Souvenir introuvable.",-1)),D(r,{to:"/map",class:"block mt-4 text-white underline"},{default:Y(()=>[...n[1]||(n[1]=[ne("Retour",-1)])]),_:1})])):(c(),d("div",Tt,[i.value?(c(),d("div",Bt,[e("img",{src:B(u).watercolorLayer,class:"absolute inset-0 w-full h-full object-cover"},null,8,Lt),n[3]||(n[3]=e("div",{class:"absolute inset-0 bg-black/20 pointer-events-none"},null,-1)),e("div",Et,[e("h1",St,C(B(u).title),1)])])):(c(),le(se(l.value),{key:0,image:B(u).watercolorLayer,title:B(u).title,"initial-completed":!1,onComplete:h},null,40,["image","title"])),i.value?(c(),d("div",Rt,[e("div",{class:"p-3 bg-white/20 backdrop-blur-md rounded-full text-white cursor-pointer shadow-lg border border-white/10 hover:bg-white/30 transition-colors",onClick:v},[...n[4]||(n[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14"}),e("path",{d:"m19 12-7 7-7-7"})],-1)])])])):I("",!0)])),B(u)?(c(),d("section",Pt,[e("div",Nt,[e("span",Ft,"Chapitre "+C(B(u).order),1),e("h2",Ot,C(B(u).title),1),n[6]||(n[6]=e("div",{class:"w-24 h-1 bg-stone-200 mx-auto mb-12"},null,-1)),e("p",Xt,C(B(u).description),1),D(r,{to:"/map",class:"inline-flex items-center gap-2 px-8 py-4 bg-[#2C3E50] text-white rounded-full font-bold shadow-lg hover:bg-[#34495E] hover:scale-105 transition-all"},{default:Y(()=>[...n[5]||(n[5]=[e("span",null,"Retour à la Carte",-1)])]),_:1})])])):I("",!0)],2)}}}),Wt=E(Dt,[["__scopeId","data-v-e52f3f8b"]]);export{Wt as default};
